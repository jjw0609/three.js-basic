(()=>{"use strict";var e,t={896:(e,t,o)=>{o(6848),o(9648),o(7992),o(2556),o(4768),o(5256),o(852),o(8867),o(2424),o(5016),o(5912),o(8724),o(8961);var n=o(6152),i=o(1596);o(8960),o(1347),o(2616);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function s(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:String(t)}var c=s((function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moving=!1,t.gltfLoader.load(t.modelSrc,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),o.modelMesh=e.scene.children[0],o.modelMesh.position.y=.3,o.modelMesh.name="ilbuni",t.scene.add(o.modelMesh),t.meshes.push(o.modelMesh),o.actions=[],o.mixer=new n.IXJ(o.modelMesh),o.actions[0]=o.mixer.clipAction(e.animations[0]),o.actions[1]=o.mixer.clipAction(e.animations[1]),o.actions[0].play()}))}));function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function h(e,t,o){return t&&u(e.prototype,t),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:String(t)}var p=h((function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t.x,this.y=t.y,this.z=t.z,this.visible=!1,t.gltfLoader.load(t.modelSrc,(function(e){o.modelMesh=e.scene.children[0],o.modelMesh.castShadow=!0,o.modelMesh.position.set(o.x,o.y,o.z),t.scene.add(o.modelMesh)}))})),m=o(5460);function w(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var v=(new n.EBH).load("./images/grid.png");v.wrapS=n.sd2,v.wrapT=n.sd2,v.repeat.x=10,v.repeat.y=10;var b=document.querySelector("#three-canvas"),g=new n.gpv({canvas:b,antialias:!0});g.setSize(window.innerWidth,window.innerHeight),g.setPixelRatio(window.devicePixelRatio>1?2:1),g.shadowMap.enabled=!0,g.shadowMap.type=n.e22;var M=new n.KAh,S=new n.Ep8(-window.innerWidth/window.innerHeight,window.innerWidth/window.innerHeight,1,-1,-1e3,1e3),x=new n.O4c(1,5,5);S.position.set(x.x,x.y,x.z),S.zoom=.2,S.updateProjectionMatrix(),M.add(S);var z=new n._E$("white",.7);M.add(z);var j=new n.CCL("white",.5),O=new n.O4c(1,1,1);j.position.x=O.x,j.position.y=O.y,j.position.z=O.z,j.castShadow=!0,j.shadow.mapSize.width=2048,j.shadow.mapSize.height=2048,j.shadow.camera.left=-100,j.shadow.camera.right=100,j.shadow.camera.top=100,j.shadow.camera.bottom=-100,j.shadow.camera.near=-100,j.shadow.camera.far=100,M.add(j);var P=[],E=new n.Ss9(new n.qC0(100,100),new n.mWG({map:v}));E.name="floor",E.rotation.x=-Math.PI/2,E.receiveShadow=!0,M.add(E),P.push(E);var A=new n.Ss9(new n.qC0(1,1),new n.a8N({color:"crimson",transparent:!0,opacity:.5}));A.rotation.x=-Math.PI/2,A.position.y=.01,A.receiveShadow=!0,M.add(A);var L=new n.Ss9(new n.qC0(3,3),new n.mWG({color:"yellow",transparent:!0,opacity:.5}));L.position.set(5,.005,5),L.rotation.x=-Math.PI/2,L.receiveShadow=!0,M.add(L);var C=new i.y,k=new p({gltfLoader:C,scene:M,modelSrc:"/models/house.glb",x:5,y:-1.3,z:2}),W=new c({scene:M,meshes:P,gltfLoader:C,modelSrc:"./models/ilbuni.glb"}),H=new n.SMI,I=new n.SA0,T=new n.O4c,q=0,N=!1,_=new n.AvZ;function B(e){I.x=e.clientX/b.clientWidth*2-1,I.y=-(e.clientY/b.clientHeight*2-1)}window.addEventListener("resize",(function(){S.left=-window.innerWidth/window.innerHeight,S.right=window.innerWidth/window.innerHeight,S.top=1,S.bottom=-1,S.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight),g.render(M,S)})),b.addEventListener("mousedown",(function(e){N=!0,B(e)})),b.addEventListener("mouseup",(function(){N=!1})),b.addEventListener("mousemove",(function(e){N&&B(e)})),b.addEventListener("touchstart",(function(e){N=!0,B(e.touches[0])})),b.addEventListener("touchend",(function(){N=!1})),b.addEventListener("touchmove",(function(e){N&&B(e.touches[0])})),function e(){var t=_.getDelta();W.mixer&&W.mixer.update(t),W.modelMesh&&S.lookAt(W.modelMesh.position),W.modelMesh&&(N&&(H.setFromCamera(I,S),function(){var e,t=w(H.intersectObjects(P));try{for(t.s();!(e=t.n()).done;){var o=e.value;"floor"===o.object.name&&(T.x=o.point.x,T.y=.3,T.z=o.point.z,W.modelMesh.lookAt(T),W.moving=!0,A.position.x=T.x,A.position.z=T.z);break}}catch(e){t.e(e)}finally{t.f()}}()),W.moving?(q=Math.atan2(T.z-W.modelMesh.position.z,T.x-W.modelMesh.position.x),W.modelMesh.position.x+=.05*Math.cos(q),W.modelMesh.position.z+=.05*Math.sin(q),S.position.x=x.x+W.modelMesh.position.x,S.position.z=x.z+W.modelMesh.position.z,W.actions[0].stop(),W.actions[1].play(),Math.abs(T.x-W.modelMesh.position.x)<.03&&Math.abs(T.z-W.modelMesh.position.z)<.03&&(W.moving=!1),Math.abs(L.position.x-W.modelMesh.position.x)<1.5&&Math.abs(L.position.z-W.modelMesh.position.z)<1.5?k.visible||(k.visible=!0,L.material.color.set("seagreen"),m.cp.to(k.modelMesh.position,{duration:1,y:1,ease:"Bounce.easeOut"}),m.cp.to(S.position,{duration:1,y:3})):k.visible&&(k.visible=!1,L.material.color.set("yellow"),m.cp.to(k.modelMesh.position,{duration:.5,y:-1.3}),m.cp.to(S.position,{duration:1,y:5}))):(W.actions[1].stop(),W.actions[0].play())),g.render(M,S),g.setAnimationLoop(e)}()}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,o,i,r)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,i,r]=e[d],s=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,i,r]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={590:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,r,[a,s,l]=o,c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var d=l(n)}for(t&&t(o);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},o=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[104],(()=>n(896)));i=n.O(i)})();